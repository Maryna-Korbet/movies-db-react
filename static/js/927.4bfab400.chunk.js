"use strict";(self.webpackChunkmovies_db_react=self.webpackChunkmovies_db_react||[]).push([[927],{2927:(e,n,t)=>{t.r(n),t.d(n,{default:()=>q});var i=t(5043),o=t(5447),s=t(8903),r=t(9252),l=t(5865),a=t(611),d=t(5475),c=t(2110),u=t(6591),x=t(6494),h=t(7600),m=t(1906),v=t(7739),p=t(7392),g=t(6520),A=t(579);function j(e){let{id:n,title:t,overview:i,popularity:o,image:s="/thumbnail.jpg",enableUserActions:r,onAddToFavorite:a}=e;return(0,A.jsxs)(c.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,A.jsx)(u.A,{component:"div",image:s,sx:{pt:"56.25%"},title:"Movie thumbnail"}),(0,A.jsxs)(x.A,{sx:{flexGrow:1},children:[(0,A.jsx)(l.A,{variant:"h5",gutterBottom:!0,children:t}),(0,A.jsx)(l.A,{variant:"body2",color:"secondary",children:i}),(0,A.jsx)(l.A,{variant:"button",display:"block",mt:2,children:o})]}),(0,A.jsxs)(h.A,{children:[(0,A.jsx)(m.A,{component:d.N_,to:"/movies/".concat(n),color:"secondary",children:"Details"}),r&&(0,A.jsx)(v.A,{title:"Add to favorites",children:(0,A.jsx)(p.A,{onClick:()=>null===a||void 0===a?void 0:a(n),children:(0,A.jsx)(g.A,{})})})]})]})}const f=(0,i.memo)(j);var y=t(4858),b=t(7733),k=t(950),w=t(3336),C=t(3193),I=t(258),_=t(7858),S=t(7121),F=t(1292),M=t(9413),N=t(4605),E=t(1962),L=t(8118);function O(e){let{onApply:n}=e;const{control:t,handleSubmit:o,formState:s}=(0,y.mN)({defaultValues:{keywords:[],genres:[]}}),[r,l]=(0,i.useState)(""),{data:a=[],isLoading:d}=(0,L.q6)(r,{skip:!r}),{data:c,isLoading:u}=(0,L.eE)(),x=(0,i.useMemo)((()=>(0,k.A)((e=>{l(e)}),1e3)),[]);return(0,A.jsx)(w.A,{sx:{m:2,p:.5,maxWidth:350},children:(0,A.jsxs)("form",{onSubmit:o(n),children:[(0,A.jsx)(C.A,{sx:{m:2,display:"block"},component:"fieldset",variant:"standard",children:(0,A.jsx)(y.xI,{name:"keywords",control:t,render:e=>{let{field:{onChange:n,value:t}}=e;return(0,A.jsx)(I.A,{multiple:!0,loading:d,disablePortal:!0,options:a,filterOptions:e=>e,getOptionLabel:e=>e.name,onChange:(e,t)=>n(t),value:t,isOptionEqualToValue:(e,n)=>e.id===n.id,onInputChange:(e,n)=>x(n),renderInput:e=>(0,A.jsx)(_.A,{...e,label:"Keywords"})})}})}),(0,A.jsx)(C.A,{sx:{m:2,display:"block"},component:"fieldset",variant:"standard",children:u?(0,A.jsx)(S.A,{width:300,height:480}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F.A,{component:"legend",children:"Genres"}),(0,A.jsx)(M.A,{sx:{maxHeight:500},children:(0,A.jsx)(y.xI,{name:"genres",control:t,render:e=>{let{field:n}=e;return(0,A.jsx)(A.Fragment,{children:null===c||void 0===c?void 0:c.map((e=>(0,A.jsx)(N.A,{control:(0,A.jsx)(E.A,{value:e.id,checked:n.value.includes(e.id),onChange:(e,t)=>{const i=Number(e.target.value);t?n.onChange([...n.value,i]):n.onChange(n.value.filter((e=>e!==i)))}}),label:e.name},e.id)))})}})})]})}),(0,A.jsx)(m.A,{type:"submit",sx:{m:2},variant:"contained",startIcon:(0,A.jsx)(b.A,{}),disabled:!s.isDirty,color:"primary",children:"Apply filter"})]})})}const W={page:1,filters:{}};const q=function(){const[e,n]=(0,i.useState)(W),{isAuthenticated:t,user:d}=(0,o.WB)(),{data:c}=(0,L.EA)(),{data:u,isFetching:x}=(0,L.Lg)(e),h=null===u||void 0===u?void 0:u.results,m=null===u||void 0===u?void 0:u.hasMorePages,v=(0,i.useCallback)((()=>{m&&n((e=>({...e,page:e.page+1})))}),[m]),[p]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{root:n=null,rootMargin:t="0px",threshold:o=1,onIntersect:s}=e,[r,l]=(0,i.useState)(),a=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=new IntersectionObserver((e=>{const[n]=e;n.isIntersecting&&(null===s||void 0===s||s()),l(n)}),{root:n,rootMargin:t,threshold:o}),i=a.current;return i&&e.observe(i),function(){i&&e.disconnect()}}),[n,t,o,s]),[a,r]}({onIntersect:v}),g=(0,i.useCallback)((e=>alert("Not implemented! Action: ".concat(null===d||void 0===d?void 0:d.name," is adding movie ").concat(e," to favorites."))),[null===d||void 0===d?void 0:d.name]);return(0,A.jsxs)(s.Ay,{container:!0,spacing:2,sx:{flexWrap:"nowrap",mt:12},children:[(0,A.jsx)(s.Ay,{item:!0,xs:"auto",sx:{mt:6},children:(0,A.jsx)(O,{onApply:e=>{const t={keywords:null===e||void 0===e?void 0:e.keywords.map((e=>e.id)),genres:null===e||void 0===e?void 0:e.genres};n({page:1,filters:t})}})}),(0,A.jsx)(s.Ay,{item:!0,xs:12,children:(0,A.jsxs)(r.A,{sx:{py:8},maxWidth:"lg",children:[!x&&!(null!==h&&void 0!==h&&h.length)&&(0,A.jsx)(l.A,{variant:"h6",children:"No movies were found that match your query."}),(0,A.jsx)(s.Ay,{container:!0,spacing:4,children:null===h||void 0===h?void 0:h.map((e=>{return(0,A.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,A.jsx)(f,{id:e.id,title:e.title,overview:e.overview,popularity:e.popularity,image:(n=e.backdrop_path,n&&c?"".concat(c.images.base_url,"w780").concat(n):void 0),enableUserActions:t,onAddToFavorite:g},e.id)},e.id);var n}))}),(0,A.jsx)("div",{ref:p,children:x&&(0,A.jsx)(a.A,{color:"primary",sx:{mt:3}})})]})})]})}}}]);
//# sourceMappingURL=927.4bfab400.chunk.js.map